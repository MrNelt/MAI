// Series expansion of function sin(x)
#include <math.h>
#include <stdio.h>
int main()
{ double x, d, S, eps=1., pi=4*atan(1.), a=0, b=pi/2., h=(b-a)/10.;
  int n;
  while(1.+eps>1.) eps/=2.; // calculating of machine epsilon
  printf("Machine epsilon = %.21f\n",eps);
  printf("----------------------------------------------------------\n");
  printf("|   x   |           S         |        sin(x)       |  n |\n");
  printf("|-------|---------------------|---------------------|----|\n");
  for(x=a;x<b+0.001;x+=h)
  { S=d=x; n=1;
    while(fabs(d)>eps)
	{ d=-d*x*x/(2*n)/(2*n+1);
	  S+=d; n++;
	}
	printf("| %.3f | %.17f | %.17f | %2d |\n", x, S, sin(x), n);
  }
   printf("----------------------------------------------------------\n");
   return 0;
}
/* Result:

Machine epsilon = 0.000000000000000000054
----------------------------------------------------------
|   x   |           S         |        sin(x)       |  n |
|-------|---------------------|---------------------|----|
| 0.000 | 0.00000000000000000 | 0.00000000000000000 |  1 |
| 0.157 | 0.15643446504023087 | 0.15643446504023087 |  7 |
| 0.314 | 0.30901699437494745 | 0.30901699437494740 |  8 |
| 0.471 | 0.45399049973954675 | 0.45399049973954675 |  9 |
| 0.628 | 0.58778525229247314 | 0.58778525229247314 | 10 |
| 0.785 | 0.70710678118654746 | 0.70710678118654746 | 11 |
| 0.942 | 0.80901699437494734 | 0.80901699437494745 | 11 |
| 1.100 | 0.89100652418836768 | 0.89100652418836779 | 12 |
| 1.257 | 0.95105651629515353 | 0.95105651629515353 | 12 |
| 1.414 | 0.98768834059513777 | 0.98768834059513777 | 13 |
| 1.571 | 1.00000000000000020 | 1.00000000000000000 | 13 |
----------------------------------------------------------

*/

